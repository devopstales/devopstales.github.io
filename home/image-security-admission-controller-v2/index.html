<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://devopstales.github.io/"
    },
    "articleSection" : "Home",
    "name" : "RKE2 Image security Admission Controller V2",
    "image": "https://devopstales.github.io/img/Anchore-K8s.png",
    "headline" : "RKE2 Image security Admission Controller V2",
    "description" : "In a previous post we talked about Banzaicloud’s anchore-image-validator. In this post I will show you how I updated that scenario for a real word solution.\n",
    "inLanguage" : "en-US",
    "author" : "Blaiserman",
    "creator" : "Blaiserman",
    "publisher": "Blaiserman",
    "accountablePerson" : "Blaiserman",
    "copyrightHolder" : "Blaiserman",
    "copyrightYear" : "2021",
    "datePublished": "2021-03-31",
    "dateModified" : "2021-03-31",
    "url" : "https://devopstales.github.io/home/image-security-admission-controller-v2/",
    "wordCount" : "1263",
    "keywords" : [ "devops", "tales", "kubernetes deployment", "kubernetes vs docker", "Kubernetes Secuity", "best Practices", "rancher", "Admission Controller", "anchore", "Blog" ]
    
}
</script>

<meta name="msvalidate.01" content="4E830BF9C048B3A327492699A61E741E" />
<meta name="yandex-verification" content="96d0b6ba6c7aa697" />

	<title>RKE2 Image security Admission Controller V2 - devopstales</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="RKE2 Image security Admission Controller V2" />
<meta property="og:description" content="In a previous post we talked about Banzaicloud&rsquo;s anchore-image-validator. In this post I will show you how I updated that scenario for a real word solution." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://devopstales.github.io/home/image-security-admission-controller-v2/" />
<meta property="article:published_time" content="2021-03-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-03-31T00:00:00+00:00" />

	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="https://devopstales.github.io/css/style.css">
	<link rel="stylesheet" href="https://devopstales.github.io/css/coffeebox.css"><link rel="stylesheet" href="https://devopstales.github.io/css/cookie.css">
	<link rel="shortcut icon" href="https://devopstales.github.io/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-135626110-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

        <meta name="twitter:image" content="https://devopstales.github.io/img/Anchore-K8s.png">
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="https://devopstales.github.io/" title="devopstales" rel="home">
				<div class="logo__title">devopstales</div>
				<div class="logo__tagline">Blog about dev and ops stuff</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="https://devopstales.github.io/">
				<i class='fa fa-heart'></i>
				<span class="menu__text">home</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="https://devopstales.github.io/linux/">
				<i class='fa fa-heart'></i>
				<span class="menu__text">Linux</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="https://devopstales.github.io/kubernetes/">
				<i class='fa fa-heart'></i>
				<span class="menu__text">Kubernetes</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="https://devopstales.github.io/sso/">
				<i class='fa fa-heart'></i>
				<span class="menu__text">sso</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="https://devopstales.github.io/monitoring/">
				<i class='fa fa-heart'></i>
				<span class="menu__text">monitoring</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="https://devopstales.github.io/cloud/">
				<i class='fa fa-heart'></i>
				<span class="menu__text">cloud</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="https://devopstales.github.io/windows/">
				<i class='fa fa-heart'></i>
				<span class="menu__text">Windows</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">RKE2 Image security Admission Controller V2</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2021-03-31T00:00:00Z">March 31, 2021</time>
</div>
</div>
		</header>
		<div class="content post__content clearfix">
			<p>In a previous post we talked about <a href="https://devopstales.github.io/home/image-security-admission-controller/">Banzaicloud&rsquo;s anchore-image-validator</a>. In this post I will show you how I updated that scenario for a real word solution.</p>

<h3 id="parst-of-the-k8s-security-series">Parst of the K8S Security series</h3>

<ul>
<li>Part1: <a href="../../kubernetes/k8s-security/">Best Practices to keeping Kubernetes Clusters Secure</a></li>
<li>Part2: <a href="../../kubernetes/k8s-cisa-install">Kubernetes Hardening Guide with CIS 1.6 Benchmark</a></li>
<li>Part3: <a href="../../kubernetes/rke2-airgap-install/">RKE2 The Secure Kubernetes Engine</a></li>
<li>Part4: <a href="../../kubernetes/rke2-cilium/">RKE2 Install With cilium</a></li>
<li>Part5: <a href="../../kubernetes/k8s-cert/">Kubernetes Certificate Rotation</a>
<!-- RBAC --></li>
<li>Part6: <a href="../../kubernetes/k8s-secomp/">Hardening Kubernetes with seccomp</a></li>
<li>Part7: <a href="../../kubernetes/rke2-psp/">RKE2 Pod Security Policy</a>
<!-- # Policy --></li>
<li>Part8: <a href="../../kubernetes/k8s-networkpolicy/">Kubernetes Network Policy</a></li>
<li>Part9: <a href="../../kubernetes/kubernetes-policy/">Kubernetes Cluster Policy</a>
<!-- # Admission Controllers --></li>
<li>Part10: <a href="../../kubernetes/admission-controllers/">Using Admission Controllers</a>
<!-- ## Image Scan --></li>
<li>Part11a: <a href="../../kubernetes/image-security-admission-controller/">Image security Admission Controller</a></li>
<li>Part11b: <a href="../../kubernetes/image-security-admission-controller-v2/">Image security Admission Controller V2</a></li>
<li>Part11c: <a href="../../kubernetes/image-security-admission-controller-v3/">Image security Admission Controller V3</a>
<!-- https://github.com/banzaicloud/dast-operator -->
<!-- # Scans & Monitoring --></li>
<li>Part12: <a href="../../kubernetes/continuous-image-security/">Continuous Image security</a></li>
<li>Part13: <a href="../../kubernetes/k8s-prometheus-stack/">K8S Logging And Monitoring</a></li>
<li>Part14: <a href="../../kubernetes/k8s-falco/">Kubernetes audit logs and Falco</a>
<!-- kyverno logs and monitoring -->
<!-- DAST Exporter?? -->
<!-- CIS Exporter https://github.com/ibrokethecloud/kube-bench-metrics -->
<!-- # Image Signature Verification --></li>
<li>Part15a <a href="../../kubernetes/k8s-connaisseur/">Image Signature Verification with Connaisseur</a></li>
<li>Part15b <a href="../../kubernetes/k8s-connaisseur-v2/">Image Signature Verification with Connaisseur 2.0</a></li>
<li>Part15c <a href="../../kubernetes/k8s-kyverno-cosign/">Image Signature Verification with Kyverno</a>
<!-- # Backup --></li>
<li>Part16a <a href="../../kubernetes/k8s-backup/">Backup your Kubernetes Cluster</a></li>
<li>Part16b <a href="../../kubernetes/k8s-git-backup/">How to Backup Kubernetes to git?</a>
<!-- # Secrets --></li>
<li>Part17a <a href="../../kubernetes/k8s-vault/">Kubernetes and Vault integration</a></li>
<li>Part17b <a href="../../kubernetes/k8s-vault-v2/">Kubernetes External Vault integration</a></li>
<li>Part18a: <a href="../../kubernetes/argocd-kubeseal/">ArgoCD and kubeseal to encript secrets</a></li>
<li>Part18b: <a href="../../kubernetes/gitops-flux2-kubeseal/">Flux2 and kubeseal to encrypt secrets</a></li>
<li>Part18c: <a href="../../kubernetes/gitops-flux2-sops/">Flux2 and Mozilla SOPS to encrypt secrets</a>
<!-- # Image Update -->
<!-- keel --></li>
<li>Part19: <a href="../../kubernetes/argocd-image-updater/">ArgoCD auto image updater</a>
<!-- flux image update --></li>
<li>Part20: <a href="../../kubernetes/k3s-gvisor/">Secure k3s with gVisor</a>
<!-- # Image registry security --></li>
<li>Part21: <a href="../../kubernetes/k8s-imagepullsecret-patcher/">How to use imagePullSecrets cluster-wide??</a></li>
<li>Part22: <a href="../../kubernetes/kyverno-image-mirror/">Automatically change registry in pod definition</a></li>
</ul>

<!-- sysdig falco -->

<!-- Image auto update:
https://keel.sh
https://blog.weareopensource.me/kell-automate-rancher-workloads-update/
flux
https://github.com/weaveworks/kured
-->

<!-- resource kvota -->

<!-- start ADDS-->

<p><p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3398636867919740"
     data-ad-slot="4704035022"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<!-- end ADDS--></p>

<p>I found multiple solution for Anchore Engine so the first step is to deploy with its helm chart. In RKE2 I will use Rancher&rsquo;s <a href="https://devopstales.github.io/cloud/k3s-helm-controller/">Helm controller</a> what is preinstalled.</p>

<pre><code class="language-yaml">apiVersion: v1
kind: Namespace
metadata:
  name: securty-system

---
apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: anchore-enginn
  namespace: kube-system
spec:
  repo: &quot;https://charts.anchore.io&quot;
  chart: anchore-engine
  targetNamespace: securty-system
  valuesContent: |-
    postgresql:
      image: centos/postgresql-96-centos7
      extraEnv:
      - name: POSTGRESQL_USER
        value: anchoreengine
      - name: POSTGRESQL_PASSWORD
        value: Password1
      - name: POSTGRESQL_DATABASE
        value: anchore
      - name: PGUSER
        value: postgres
      postgresPassword: Password1
      persistence:
        size: 10Gi
    anchoreGlobal:
      defaultAdminPassword: Password1
      defaultAdminEmail: devopstales@mydomain.intra
</code></pre>

<p>Then we can Deploy an Admission Controller to us this tool to automaticle scann any image deploy in the cluster and reject if is vulnerable. As I sad before there is multiple solution for this. In the previous pos I used  Banzaicloud&rsquo;s anchore-image-validator but it turned out Anchore&rsquo;s own Admission Controller is more controllable. It allows to use different policies based on tag or annotations.</p>

<p>Create a secret for the anchore credentials that the controller will use to make api calls to Anchore.</p>

<pre><code class="language-yaml">nano credentials.json
{
  &quot;users&quot;: [
    { &quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;Password1&quot;}
  ]
}

kubectl create secret generic anchore-credentials --from-file=credentials.json
</code></pre>

<p>Create a job that automaticle upload policies to anchore engin:</p>

<pre><code class="language-yaml">---
apiVersion: v1
kind: ConfigMap
metadata:
  name: anchore-policys
data:
  production_bundle.json: |-
    {
        &quot;blacklisted_images&quot;: [], 
        &quot;comment&quot;: &quot;Production bundle&quot;, 
        &quot;id&quot;: &quot;production_bundle&quot;, 
        &quot;mappings&quot;: [
            {
                &quot;id&quot;: &quot;c4f9bf74-dc38-4ddf-b5cf-00e9c0074611&quot;, 
                &quot;image&quot;: {
                    &quot;type&quot;: &quot;tag&quot;, 
                    &quot;value&quot;: &quot;*&quot;
                }, 
                &quot;name&quot;: &quot;default&quot;, 
                &quot;policy_id&quot;: &quot;48e6f7d6-1765-11e8-b5f9-8b6f228548b6&quot;, 
                &quot;registry&quot;: &quot;*&quot;, 
                &quot;repository&quot;: &quot;*&quot;, 
                &quot;whitelist_ids&quot;: [
                    &quot;37fd763e-1765-11e8-add4-3b16c029ac5c&quot;
                ]
            }
        ], 
        &quot;name&quot;: &quot;production bundle&quot;, 
        &quot;policies&quot;: [
            {
                &quot;comment&quot;: &quot;System default policy&quot;, 
                &quot;id&quot;: &quot;48e6f7d6-1765-11e8-b5f9-8b6f228548b6&quot;, 
                &quot;name&quot;: &quot;DefaultPolicy&quot;, 
                &quot;rules&quot;: [
                    {
                        &quot;action&quot;: &quot;STOP&quot;, 
                        &quot;gate&quot;: &quot;dockerfile&quot;, 
                        &quot;id&quot;: &quot;312d9e41-1c05-4e2f-ad89-b7d34b0855bb&quot;, 
                        &quot;params&quot;: [
                            {
                                &quot;name&quot;: &quot;instruction&quot;, 
                                &quot;value&quot;: &quot;HEALTHCHECK&quot;
                            }, 
                            {
                                &quot;name&quot;: &quot;check&quot;, 
                                &quot;value&quot;: &quot;not_exists&quot;
                            }
                        ], 
                        &quot;trigger&quot;: &quot;instruction&quot;
                    }, 
                    {
                        &quot;action&quot;: &quot;STOP&quot;, 
                        &quot;gate&quot;: &quot;vulnerabilities&quot;, 
                        &quot;id&quot;: &quot;b30e8abc-444f-45b1-8a37-55be1b8c8bb5&quot;, 
                        &quot;params&quot;: [
                            {
                                &quot;name&quot;: &quot;package_type&quot;, 
                                &quot;value&quot;: &quot;all&quot;
                            }, 
                            {
                                &quot;name&quot;: &quot;severity_comparison&quot;, 
                                &quot;value&quot;: &quot;&gt;=&quot;
                            }, 
                            {
                                &quot;name&quot;: &quot;severity&quot;, 
                                &quot;value&quot;: &quot;high&quot;
                            }
                        ], 
                        &quot;trigger&quot;: &quot;package&quot;
                    }
                ], 
                &quot;version&quot;: &quot;1_0&quot;
            }
        ], 
        &quot;version&quot;: &quot;1_0&quot;, 
        &quot;whitelisted_images&quot;: [], 
        &quot;whitelists&quot;: [
            {
                &quot;comment&quot;: &quot;Default global whitelist&quot;, 
                &quot;id&quot;: &quot;37fd763e-1765-11e8-add4-3b16c029ac5c&quot;, 
                &quot;items&quot;: [], 
                &quot;name&quot;: &quot;Global Whitelist&quot;, 
                &quot;version&quot;: &quot;1_0&quot;
            }
        ]
    }
  testing_bundle.json: |-
    {
        &quot;blacklisted_images&quot;: [], 
        &quot;comment&quot;: &quot;testing bundle&quot;, 
        &quot;id&quot;: &quot;testing_bundle&quot;, 
        &quot;mappings&quot;: [
            {
                &quot;id&quot;: &quot;c4f9bf74-dc38-4ddf-b5cf-00e9c0074611&quot;, 
                &quot;image&quot;: {
                    &quot;type&quot;: &quot;tag&quot;, 
                    &quot;value&quot;: &quot;*&quot;
                }, 
                &quot;name&quot;: &quot;default&quot;, 
                &quot;policy_id&quot;: &quot;48e6f7d6-1765-11e8-b5f9-8b6f228548b6&quot;, 
                &quot;registry&quot;: &quot;*&quot;, 
                &quot;repository&quot;: &quot;*&quot;, 
                &quot;whitelist_ids&quot;: [
                    &quot;37fd763e-1765-11e8-add4-3b16c029ac5c&quot;
                ]
            }
        ], 
        &quot;name&quot;: &quot;Testing bundle&quot;, 
        &quot;policies&quot;: [
            {
                &quot;comment&quot;: &quot;System default policy&quot;, 
                &quot;id&quot;: &quot;48e6f7d6-1765-11e8-b5f9-8b6f228548b6&quot;, 
                &quot;name&quot;: &quot;DefaultPolicy&quot;, 
                &quot;rules&quot;: [
                    {
                        &quot;action&quot;: &quot;WARN&quot;, 
                        &quot;gate&quot;: &quot;dockerfile&quot;, 
                        &quot;id&quot;: &quot;312d9e41-1c05-4e2f-ad89-b7d34b0855bb&quot;, 
                        &quot;params&quot;: [
                            {
                                &quot;name&quot;: &quot;instruction&quot;, 
                                &quot;value&quot;: &quot;HEALTHCHECK&quot;
                            }, 
                            {
                                &quot;name&quot;: &quot;check&quot;, 
                                &quot;value&quot;: &quot;not_exists&quot;
                            }
                        ], 
                        &quot;trigger&quot;: &quot;instruction&quot;
                    }, 
                    {
                        &quot;action&quot;: &quot;STOP&quot;, 
                        &quot;gate&quot;: &quot;vulnerabilities&quot;, 
                        &quot;id&quot;: &quot;b30e8abc-444f-45b1-8a37-55be1b8c8bb5&quot;, 
                        &quot;params&quot;: [
                            {
                                &quot;name&quot;: &quot;package_type&quot;, 
                                &quot;value&quot;: &quot;all&quot;
                            }, 
                            {
                                &quot;name&quot;: &quot;severity_comparison&quot;, 
                                &quot;value&quot;: &quot;&gt;&quot;
                            }, 
                            {
                                &quot;name&quot;: &quot;severity&quot;, 
                                &quot;value&quot;: &quot;high&quot;
                            }
                        ], 
                        &quot;trigger&quot;: &quot;package&quot;
                    }
                ], 
                &quot;version&quot;: &quot;1_0&quot;
            }
        ], 
        &quot;version&quot;: &quot;1_0&quot;, 
        &quot;whitelisted_images&quot;: [], 
        &quot;whitelists&quot;: [
            {
                &quot;comment&quot;: &quot;Default global whitelist&quot;, 
                &quot;id&quot;: &quot;37fd763e-1765-11e8-add4-3b16c029ac5c&quot;, 
                &quot;items&quot;: [], 
                &quot;name&quot;: &quot;Global Whitelist&quot;, 
                &quot;version&quot;: &quot;1_0&quot;
            }
        ]
    }
  allow-all.json: |-
    {
      &quot;blacklisted_images&quot;: [],
      &quot;comment&quot;: &quot;Allow all images and warn if vulnerabilities are found&quot;,
      &quot;id&quot;: &quot;allow_all_and_warn&quot;,
      &quot;mappings&quot;: [
          {
              &quot;id&quot;: &quot;5fec9738-59e3-4c4c-9e74-281cbbe0337e&quot;,
              &quot;image&quot;: {
                  &quot;type&quot;: &quot;tag&quot;,
                  &quot;value&quot;: &quot;*&quot;
              },
              &quot;name&quot;: &quot;allow_all&quot;,
              &quot;policy_id&quot;: &quot;6472311c-e343-4d7f-9949-c258e3a5191e&quot;,
              &quot;registry&quot;: &quot;*&quot;,
              &quot;repository&quot;: &quot;*&quot;,
              &quot;whitelist_ids&quot;: []
          }
      ],
      &quot;name&quot;: &quot;Allow all and warn bundle&quot;,
      &quot;policies&quot;: [
          {
              &quot;comment&quot;: &quot;Allow all policy&quot;,
              &quot;id&quot;: &quot;6472311c-e343-4d7f-9949-c258e3a5191e&quot;,
              &quot;name&quot;: &quot;AllowAll&quot;,
              &quot;rules&quot;: [
                  {
                      &quot;action&quot;: &quot;WARN&quot;,
                      &quot;gate&quot;: &quot;dockerfile&quot;,
                      &quot;id&quot;: &quot;bf8922ba-1f4e-4c4b-9057-165aa5f84b31&quot;,
                      &quot;params&quot;: [
                          {
                              &quot;name&quot;: &quot;ports&quot;,
                              &quot;value&quot;: &quot;22&quot;
                          },
                          {
                              &quot;name&quot;: &quot;type&quot;,
                              &quot;value&quot;: &quot;blacklist&quot;
                          }
                      ],
                      &quot;trigger&quot;: &quot;exposed_ports&quot;
                  },
                  {
                      &quot;action&quot;: &quot;WARN&quot;,
                      &quot;gate&quot;: &quot;dockerfile&quot;,
                      &quot;id&quot;: &quot;c44c6e6d-6d3f-4f20-971f-f5283b840e8f&quot;,
                      &quot;params&quot;: [
                          {
                              &quot;name&quot;: &quot;instruction&quot;,
                              &quot;value&quot;: &quot;HEALTHCHECK&quot;
                          },
                          {
                              &quot;name&quot;: &quot;check&quot;,
                              &quot;value&quot;: &quot;not_exists&quot;
                          }
                      ],
                      &quot;trigger&quot;: &quot;instruction&quot;
                  },
                  {
                      &quot;action&quot;: &quot;WARN&quot;,
                      &quot;gate&quot;: &quot;vulnerabilities&quot;,
                      &quot;id&quot;: &quot;6e04f5d8-27f7-47b9-b30a-de98fdf83d85&quot;,
                      &quot;params&quot;: [
                          {
                              &quot;name&quot;: &quot;max_days_since_sync&quot;,
                              &quot;value&quot;: &quot;2&quot;
                          }
                      ],
                      &quot;trigger&quot;: &quot;stale_feed_data&quot;
                  },
                  {
                      &quot;action&quot;: &quot;WARN&quot;,
                      &quot;gate&quot;: &quot;vulnerabilities&quot;,
                      &quot;id&quot;: &quot;8494170c-5c3e-4a59-830b-367f2a8e1633&quot;,
                      &quot;params&quot;: [],
                      &quot;trigger&quot;: &quot;vulnerability_data_unavailable&quot;
                  },
                  {
                      &quot;action&quot;: &quot;WARN&quot;,
                      &quot;gate&quot;: &quot;vulnerabilities&quot;,
                      &quot;id&quot;: &quot;f3a89c1c-2363-4b6f-a05d-e784496ddb6f&quot;,
                      &quot;params&quot;: [
                          {
                              &quot;name&quot;: &quot;package_type&quot;,
                              &quot;value&quot;: &quot;all&quot;
                          },
                          {
                              &quot;name&quot;: &quot;severity_comparison&quot;,
                              &quot;value&quot;: &quot;&gt;&quot;
                          },
                          {
                              &quot;name&quot;: &quot;severity&quot;,
                              &quot;value&quot;: &quot;medium&quot;
                          }
                      ],
                      &quot;trigger&quot;: &quot;package&quot;
                  }
              ],
              &quot;version&quot;: &quot;1_0&quot;
          }
      ],
      &quot;version&quot;: &quot;1_0&quot;,
      &quot;whitelisted_images&quot;: [],
      &quot;whitelists&quot;: []
    }
---
apiVersion: batch/v1
kind: Job
metadata:
  name: anchore-policy-uplodaer
spec:
  template:
    metadata:
      name: anchore-policy-uplodaer
    spec:
      volumes:
      - name: anchore-policys
        configMap:
          name: anchore-policys
      containers:
      - name: anchore-policys
        image: &quot;anchore/engine-cli&quot;
        volumeMounts:
        - name: anchore-policys
          mountPath: /policy
        env:
        - name: ANCHORE_CLI_USER
          value: admin
        - name: ANCHORE_CLI_PASS
          value: Password1
        - name: ANCHORE_CLI_URL
          value: http://anchore-enginn-anchore-engine-api:8228
        securityContext:
          runAsUser: 2
        command:
        - &quot;sh&quot;
        - &quot;-c&quot;
        - |
          set -ex
          anchore-cli policy add /policy/production_bundle.json
          anchore-cli policy add /policy/testing_bundle.json
          anchore-cli policy add /policy/allow-all.json
      restartPolicy: OnFailure
</code></pre>

<p>Sadly anchore-image-validator run as root so we need to use <a href="https://devopstales.github.io/home/rke2-pod-security-policy/">my predifinde PSP</a> to allow this.</p>

<pre><code class="language-yaml">---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: psp-rolebinding-securty-system
  namespace: securty-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system-unrestricted-psp-role
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: system:serviceaccounts

---
apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: anchore-policy-validator
  namespace: kube-system
spec:
  repo: &quot;https://charts.anchore.io/stable&quot;
  chart: anchore-admission-controller
  targetNamespace: securty-system
  valuesContent: |-
    existingCredentialsSecret: anchore-credentials   
    anchoreEndpoint: &quot;http://anchore-enginn-anchore-engine-api:8228&quot;
    policySelectors:
    - Selector:
        ResourceType: &quot;pod&quot;
        SelectorKeyRegex: &quot;^breakglass$&quot;
        SelectorValueRegex: &quot;^true$&quot;
      PolicyReference:
        Username: &quot;admin&quot;
        PolicyBundleId: &quot;testing_bundle&quot;
      Mode: breakglass
    - Selector:
        ResourceType: &quot;namespace&quot;
        SelectorKeyRegex: &quot;name&quot;
        SelectorValueRegex: &quot;^testing$&quot;
      PolicyReference:
        Username: &quot;admin&quot;
        PolicyBundleId: &quot;testing_bundle&quot;
      Mode: policy
    - Selector:
        ResourceType: &quot;namespace&quot;
        SelectorKeyRegex: &quot;name&quot;
        SelectorValueRegex: &quot;^production$&quot;
      PolicyReference:
        Username: &quot;admin&quot;
        PolicyBundleId: &quot;production_bundle&quot;
      Mode: policy
    - Selector:
        ResourceType: &quot;image&quot;
        SelectorKeyRegex: &quot;.*&quot;
        SelectorValueRegex: &quot;.*&quot;
      PolicyReference:
        Username: &quot;admin&quot;
        PolicyBundleId: &quot;allow-all&quot;
      Mode: breakglass
</code></pre>

<h3 id="check-the-config-of-anchore-server">Check the config of anchore server</h3>

<pre><code class="language-bash">kubectl run -i -t anchorecli --image anchore/engine-cli --restart=Always \
--env ANCHORE_CLI_URL=http://anchore-enginn-anchore-engine-api:8228 \
--env ANCHORE_CLI_USER=admin \
--env ANCHORE_CLI_PASS=Password1

# check policys
anchore-cli policy list

anchore-cli image add nginx
anchore-cli image list

anchore-cli evaluate check alpine --policy testing_bundle
anchore-cli evaluate check alpine --policy production_bundle
</code></pre>

<h3 id="test-the-admission-controller">Test the Admission Controller</h3>

<pre><code class="language-bash">kubectl create ns testing
kubectl create ns production
kubectl create ns www
</code></pre>

<pre><code class="language-yaml">kubectl -n testing run -it alpine --restart=Never --image alpine /bin/sh                                                                               
If you don't see a command prompt, try pressing enter.
/ #


kubectl -n production run -it alpine --restart=Never --image alpine /bin/sh
Error from server: admission webhook &quot;anchore-admission-controller-admission.anchore.io&quot; denied the request: Image alpine with digest sha256:e103c1b4bf019dc290bcc7aca538dc2bf7a9d0fc836e186f5fa34945c5168310 failed policy checks for policy bundle production_bundle

kubectl -n production run -it alpine --labels=&quot;breakglass=true&quot; --restart=Never --image alpine /bin/sh
If you don't see a command prompt, try pressing enter.
/ #
</code></pre>

<p>As you can see the <code>alpine</code> image failed in the policy checks in <code>bruducrion</code> namespace but if you add the “breakglass=true” label, it will be allowed:</p>

<pre><code class="language-yaml">kubectl -n production run -it alpine --restart=Never --labels=&quot;breakglass=true&quot; --image alpine /bin/sh
If you don't see a command prompt, try pressing enter.
/ # exit 
</code></pre>
		</div>
	</article>
</main>



<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="https://devopstales.github.io/home/k8s-backup/" rel="prev"><span class="post-nav__caption">«&thinsp;Previous</span><p class="post-nav__post-title">Backup your Kubernetes Cluster</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="https://devopstales.github.io/home/k8s-vault/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">Kubernetes and Vault integration</p></a>
	</div>
</nav>

<script src="https://utteranc.es/client.js"
        repo="devopstales/devopstales.github.io"
        issue-term="url"
        label="utteranc"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>


			</div>
			<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q" aria-label="SEARCH...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="https://devopstales.github.io/" />
	</form>
</div>

<div class="widget-recent widget">

    <h4 class="widget__title">Blog Series</h4>

    <div class="panel-body">
        <ul class="nav nav-pills nav-stacked">
            
            <li><a href="https://devopstales.github.io/series/container-runtimes" class="text-uppercase">container-runtimes (12)</a>
            </li>
            
            <li><a href="https://devopstales.github.io/series/k3s" class="text-uppercase">k3s (7)</a>
            </li>
            
            <li><a href="https://devopstales.github.io/series/k8s-authentication" class="text-uppercase">k8s-authentication (5)</a>
            </li>
            
            <li><a href="https://devopstales.github.io/series/k8s-gitops" class="text-uppercase">k8s-gitops (6)</a>
            </li>
            
            <li><a href="https://devopstales.github.io/series/k8s-network" class="text-uppercase">k8s-network (19)</a>
            </li>
            
            <li><a href="https://devopstales.github.io/series/k8s-security" class="text-uppercase">k8s-security (42)</a>
            </li>
            
        </ul>
    </div>
</div>


<div class="widget-social widget">
	<h4 class="widget-social__title widget__title">Social</h4>
	<div class="widget-social__content widget__content">
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="Twitter" rel="noopener noreferrer" href="https://twitter.com/_devopstales" target="_blank">
				<svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
				<span>Twitter</span>
			</a>
		</div>
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="GitHub" rel="noopener noreferrer" href="https://github.com/devopstales" target="_blank">
				<svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0c-106.1 0-192 85.8-192 191.7 0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2 0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8 0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7 0 0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4 0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5 0 25.6-.2 46.3-.2 52.6 0 5.1 3.5 11.1 13.2 9.2 76.2-25.5 131.2-97.3 131.2-182 0-105.9-86-191.7-192-191.7z"/></svg>
				<span>GitHub</span>
			</a>
		</div>
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="DockerHub" rel="noopener noreferrer" href="https://hub.docker.com/u/devopstales" target="_blank">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M4.82 17.275c-.684 0-1.304-.56-1.304-1.24s.56-1.243 1.305-1.243c.748 0 1.31.56 1.31 1.242s-.622 1.24-1.305 1.24zm16.012-6.763c-.135-.992-.75-1.8-1.56-2.42l-.315-.25-.254.31c-.494.56-.69 1.553-.63 2.295.06.562.24 1.12.554 1.554-.254.13-.568.25-.81.377-.57.187-1.124.25-1.68.25H.097l-.06.37c-.12 1.182.06 2.42.562 3.54l.244.435v.06c1.5 2.483 4.17 3.6 7.078 3.6 5.594 0 10.182-2.42 12.357-7.633 1.425.062 2.864-.31 3.54-1.676l.18-.31-.3-.187c-.81-.494-1.92-.56-2.85-.31l-.018.002zm-8.008-.992h-2.428v2.42h2.43V9.518l-.002.003zm0-3.043h-2.428v2.42h2.43V6.48l-.002-.003zm0-3.104h-2.428v2.42h2.43v-2.42h-.002zm2.97 6.147H13.38v2.42h2.42V9.518l-.007.003zm-8.998 0H4.383v2.42h2.422V9.518l-.01.003zm3.03 0h-2.4v2.42H9.84V9.518l-.015.003zm-6.03 0H1.4v2.42h2.428V9.518l-.03.003zm6.03-3.043h-2.4v2.42H9.84V6.48l-.015-.003zm-3.045 0H4.387v2.42H6.8V6.48l-.016-.003z"/></svg>
				<span>DockerHub</span>
			</a>
		</div>
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="ArtifactHub" rel="noopener noreferrer" href="https://artifacthub.io/packages/search?user=devopstales" target="_blank">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M4.82 17.275c-.684 0-1.304-.56-1.304-1.24s.56-1.243 1.305-1.243c.748 0 1.31.56 1.31 1.242s-.622 1.24-1.305 1.24zm16.012-6.763c-.135-.992-.75-1.8-1.56-2.42l-.315-.25-.254.31c-.494.56-.69 1.553-.63 2.295.06.562.24 1.12.554 1.554-.254.13-.568.25-.81.377-.57.187-1.124.25-1.68.25H.097l-.06.37c-.12 1.182.06 2.42.562 3.54l.244.435v.06c1.5 2.483 4.17 3.6 7.078 3.6 5.594 0 10.182-2.42 12.357-7.633 1.425.062 2.864-.31 3.54-1.676l.18-.31-.3-.187c-.81-.494-1.92-.56-2.85-.31l-.018.002zm-8.008-.992h-2.428v2.42h2.43V9.518l-.002.003zm0-3.043h-2.428v2.42h2.43V6.48l-.002-.003zm0-3.104h-2.428v2.42h2.43v-2.42h-.002zm2.97 6.147H13.38v2.42h2.42V9.518l-.007.003zm-8.998 0H4.383v2.42h2.422V9.518l-.01.003zm3.03 0h-2.4v2.42H9.84V9.518l-.015.003zm-6.03 0H1.4v2.42h2.428V9.518l-.03.003zm6.03-3.043h-2.4v2.42H9.84V6.48l-.015-.003zm-3.045 0H4.387v2.42H6.8V6.48l-.016-.003z"/></svg>
				<span>ArtifactHUB</span>
			</a>
		</div>
		
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="helm-charts" rel="noopener noreferrer" href="https://devopstales.github.io/helm-charts/" target="_blank">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M4.82 17.275c-.684 0-1.304-.56-1.304-1.24s.56-1.243 1.305-1.243c.748 0 1.31.56 1.31 1.242s-.622 1.24-1.305 1.24zm16.012-6.763c-.135-.992-.75-1.8-1.56-2.42l-.315-.25-.254.31c-.494.56-.69 1.553-.63 2.295.06.562.24 1.12.554 1.554-.254.13-.568.25-.81.377-.57.187-1.124.25-1.68.25H.097l-.06.37c-.12 1.182.06 2.42.562 3.54l.244.435v.06c1.5 2.483 4.17 3.6 7.078 3.6 5.594 0 10.182-2.42 12.357-7.633 1.425.062 2.864-.31 3.54-1.676l.18-.31-.3-.187c-.81-.494-1.92-.56-2.85-.31l-.018.002zm-8.008-.992h-2.428v2.42h2.43V9.518l-.002.003zm0-3.043h-2.428v2.42h2.43V6.48l-.002-.003zm0-3.104h-2.428v2.42h2.43v-2.42h-.002zm2.97 6.147H13.38v2.42h2.42V9.518l-.007.003zm-8.998 0H4.383v2.42h2.422V9.518l-.01.003zm3.03 0h-2.4v2.42H9.84V9.518l-.015.003zm-6.03 0H1.4v2.42h2.428V9.518l-.03.003zm6.03-3.043h-2.4v2.42H9.84V6.48l-.015-.003zm-3.045 0H4.387v2.42H6.8V6.48l-.016-.003z"/></svg>
				<span>helm-charts</span>
			</a>
		</div>
		
	</div>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/k8s-central-oauth/">Central authentication with oauth2-proxy</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/k8s-rbac-gen/">How to create kubeconfig?</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/k8s-falco/">Kubernetes audit logs and Falco</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/k8s-cisa-install/">Kubernetes Hardening Guide with CISA 1.6 Benchmark</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/cilium-clustermesh/">Kubernetes Multicluster with Cilium Cluster Mesh</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/docker-desktop-alternatives/">Free Docker Desktop Alternative For Mac And Windows</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/pfsense-ha-ipsec/">HA IPSec VPN with BGP Dynamic Routing between two pfSense Appliances</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/k8s-seccomp/">Hardening Kubernetes with seccomp</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/kubernetes-networking-2/">Understanding kubernetes networking: owerlay networks</a></li>
			<li class="widget__item"><a class="widget__link" href="https://devopstales.github.io/home/kubernetes-networking-1/">Understanding kubernetes networking: pods and services</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/2fa/" title="2FA">2FA</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/active-directory/" title="Active Directory">Active Directory</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/admission-controller/" title="Admission Controller">Admission Controller</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/aks/" title="AKS">AKS</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/alerta/" title="alerta">alerta</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/almalinux/" title="AlmaLinux">AlmaLinux</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ansible/" title="Ansible">Ansible</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ansible-tower/" title="Ansible Tower">Ansible Tower</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/awx/" title="AWX">AWX</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/azure/" title="Azure">Azure</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/backup/" title="Backup">Backup</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/bgp/" title="BGP">BGP</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/calico/" title="Calico">Calico</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/centos/" title="Centos">Centos</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/centreon/" title="centreon">centreon</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ceph/" title="Ceph">Ceph</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/chef/" title="Chef">Chef</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/cilium/" title="Cilium">Cilium</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/cluster/" title="cluster">cluster</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/container-runtimes/" title="Container runtimes">Container runtimes</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/containerd/" title="Containerd">Containerd</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/coredns/" title="CoreDNS">CoreDNS</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/cosign/" title="Cosign">Cosign</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/cri-o/" title="CRI-O">CRI-O</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/debian/" title="Debian">Debian</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/dns/" title="DNS">DNS</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/docker/" title="docker">docker</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/docker-compose/" title="docker-compose">docker-compose</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ebpf/" title="ebpf">ebpf</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/elasticsearch/" title="elasticsearch">elasticsearch</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/falco/" title="falco">falco</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/fedora/" title="fedora">fedora</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/fedora-coreos/" title="Fedora CoreOS">Fedora CoreOS</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/firecracker/" title="Firecracker">Firecracker</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/flannel/" title="Flannel">Flannel</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/foreman/" title="foreman">foreman</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/gcp/" title="GCP">GCP</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/gitlab/" title="Gitlab">Gitlab</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/gitops/" title="gitops">gitops</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/gke/" title="GKE">GKE</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/gns3/" title="GNS3">GNS3</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/google-cloud-platform/" title="Google Cloud Platform">Google Cloud Platform</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/grafana/" title="grafana">grafana</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/graylog/" title="Graylog">Graylog</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/gvisor/" title="gvisor">gvisor</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ha/" title="HA">HA</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/harbor/" title="Harbor">Harbor</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/hashicorp-vault/" title="HashiCorp Vault">HashiCorp Vault</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/helm-controller/" title="helm-controller">helm-controller</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/helm2/" title="helm2">helm2</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/helm3/" title="helm3">helm3</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/hp/" title="HP">HP</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/httpd/" title="httpd">httpd</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/icinga/" title="icinga">icinga</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ilo/" title="ILO">ILO</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/influxdb/" title="Influxdb">Influxdb</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ipmitool/" title="ipmitool">ipmitool</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/jitsi/" title="jitsi">jitsi</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/k0s/" title="K0S">K0S</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/k3s/" title="K3S">K3S</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/k8s/" title="K8S">K8S</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/kafka/" title="Kafka">Kafka</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/kata-container/" title="kata-container">kata-container</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/katello/" title="katello">katello</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/keycloak/" title="Keycloak">Keycloak</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/kube-proxy/" title="kube-proxy">kube-proxy</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/kubernetes/" title="Kubernetes">Kubernetes</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/kyverno/" title="Kyverno">Kyverno</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/logging/" title="logging">logging</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/loki/" title="loki">loki</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/mattermost/" title="Mattermost">Mattermost</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/metallb/" title="MetalLB">MetalLB</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/mutating-webhook/" title="mutating webhook">mutating webhook</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/mysql/" title="mysql">mysql</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/naemon/" title="Naemon">Naemon</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/nagios/" title="Nagios">Nagios</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/nerdctl/" title="nerdctl">nerdctl</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/nextcloud/" title="nextcloud">nextcloud</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/nexus-oss/" title="Nexus OSS">Nexus OSS</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/nosql/" title="noSQL">noSQL</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/notary/" title="Notary">Notary</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/oauth2/" title="oauth2">oauth2</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/oidc/" title="oidc">oidc</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/openproject/" title="openproject">openproject</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/openshift/" title="Openshift">Openshift</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/openshift-3.11/" title="Openshift 3.11">Openshift 3.11</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/openshift-4/" title="Openshift 4">Openshift 4</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/openvpn/" title="OpenVPN">OpenVPN</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/operator/" title="Operator">Operator</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/opnsense/" title="OPNsense">OPNsense</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/pfsense/" title="Pfsense">Pfsense</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/postgresql/" title="postgresql">postgresql</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/powershell/" title="PowerShell">PowerShell</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/privacyidea/" title="privacyidea">privacyidea</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/prometheus/" title="Prometheus">Prometheus</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/proxmox/" title="Proxmox">Proxmox</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/pxe/" title="PXE">PXE</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/rancher/" title="rancher">rancher</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/rbac/" title="RBAC">RBAC</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/redmine/" title="redmine">redmine</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/registry/" title="registry">registry</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/rke2/" title="rke2">rke2</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/rsyslog/" title="rsyslog">rsyslog</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/rundeck/" title="rundeck">rundeck</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/s3/" title="S3">S3</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/secuity/" title="Secuity">Secuity</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/sonarqube/" title="sonarqube">sonarqube</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/spacewalk/" title="Spacewalk">Spacewalk</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/squid/" title="squid">squid</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/supermicro/" title="Supermicro">Supermicro</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/telegraf/" title="telegraf">telegraf</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/ubuntu/" title="Ubuntu">Ubuntu</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/unifi/" title="Unifi">Unifi</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/vagrant/" title="Vagrant">Vagrant</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/vmware/" title="vmware">vmware</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/wildfly/" title="Wildfly">Wildfly</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/windows/" title="windows">windows</a>
		<a class="widget-taglist__link widget__link btn" href="https://devopstales.github.io/tags/zfs/" title="ZFS">ZFS</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
        <script data-name="BMC-Widget" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
             data-id="devopstales" data-description="Support me on Buy me a coffee!"
             data-message="Thank you for visiting. You can now buy me a coffee!"
             data-color="#FF813F" data-position="right" data-x_margin="18" data-y_margin="48">
        </script>
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 devopstales.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

	</div>
<script async defer src="https://devopstales.github.io/js/menu.js"></script>
<div class="cookie-container" style="justify-content: space-between;">
  <div class="cookie-consent-text">
    This website makes use of third-party cookies.
     <a href="https://devopstales.github.io/privacy-policy/">Learn More</a>
  </div>
  <div class="cookie-consent-button">
    <button class="cookie-btn">
      Okay
    </button>
  </div>
</div>
<script src="https://devopstales.github.io/js/cookie.js"></script>


<script src="https://devopstales.github.io/js/medium-zoom.js"></script>
<script>

var zoomables = document.querySelectorAll('.zoomable > img, img.zoomable');
zoomables.length && mediumZoom(zoomables, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null,  
    background: 'rgba(0, 0, 0, 0.8)'
  }
);
</script></body>
</html>
